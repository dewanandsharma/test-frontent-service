<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Send Form to WhatsApp Web</title>
</head>
<body>
  <form id="contactinfo">
    <input type="text" id="name" placeholder="Enter Your Name" required><br>
    <input type="email" id="email" placeholder="Enter Your Email" required><br>
    <input type="text" id="mobile" placeholder="Enter 10-digit mobile number" required><br>
    <textarea id="message" placeholder="Enter Message" required></textarea><br>
    <button type="submit">Send Message</button>
  </form>

  <script>
    document.getElementById('contactinfo').addEventListener('submit', function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const messageText = document.getElementById('message').value.trim();

      if (!name || !email || !mobile || !messageText) {
        alert('Please fill all fields.');
        return;
      }

      if (!/^\d{10}$/.test(mobile)) {
        alert('Please enter a valid 10-digit mobile number.');
        return;
      }

      // ✅ Get user location
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const locationLink = `https://www.google.com/maps?q=${latitude},${longitude}`;

            const message = [
              '🟢 New Contact Form Submission:',
              '👤 Name: ' + name,
              '📧 Email: ' + email,
              '📞 Mobile: ' + mobile,
              '💬 Message: ' + messageText,
              '📍 Location: ' + locationLink
            ].join('\n');

            sendMessage(message);
          },
          function () {
            alert('Could not get location. Sending message without location.');
            const message = [
              '🟢 New Contact Form Submission:',
              '👤 Name: ' + name,
              '📧 Email: ' + email,
              '📞 Mobile: ' + mobile,
              '💬 Message: ' + messageText
            ].join('\n');
            sendMessage(message);
          }
        );
      } else {
        alert('Geolocation not supported.');
        const message = [
          '🟢 New Contact Form Submission:',
          '👤 Name: ' + name,
          '📧 Email: ' + email,
          '📞 Mobile: ' + mobile,
          '💬 Message: ' + messageText
        ].join('\n');
        sendMessage(message);
      }

      // ✅ Function to send message via WhatsApp Web only
      function sendMessage(message) {
        const encoded = encodeURIComponent(message);
        const RECIPIENT_NUMBER = '918707235841'; // Your WhatsApp number

        // 💻 Always open WhatsApp Web in browser
        const waWebUrl = `https://web.whatsapp.com/send?phone=${RECIPIENT_NUMBER}&text=${encoded}`;

        window.open(waWebUrl, '_blank');

        document.getElementById('contactinfo').reset();
      }
    });
  </script>
</body>
</html>
