<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Send Form to WhatsApp or SMS</title>
</head>
<body>
  <form id="contactinfo">
    <input type="text" id="name" placeholder="Enter Your Name" required><br>
    <input type="email" id="email" placeholder="Enter Your Email" required><br>
    <input type="text" id="mobile" placeholder="Enter 10-digit mobile number" required><br>
    <textarea id="message" placeholder="Enter Message" required></textarea><br>
    <button type="submit">Send Message</button>
  </form>

  <script>
    document.getElementById('contactinfo').addEventListener('submit', function (e) {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const messageText = document.getElementById('message').value.trim();

      if (!name || !email || !mobile || !messageText) {
        alert('Please fill all fields.');
        return;
      }

      if (!/^\d{10}$/.test(mobile)) {
        alert('Please enter a valid 10-digit mobile number.');
        return;
      }

      // Get user location
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            const locationLink = `https://www.google.com/maps?q=${latitude},${longitude}`;
            sendMessage(name, email, mobile, messageText, locationLink);
          },
          function () {
            // If user denies location access
            alert('Could not get location. Sending message without location.');
            sendMessage(name, email, mobile, messageText, 'Location not available');
          }
        );
      } else {
        alert('Geolocation not supported.');
        sendMessage(name, email, mobile, messageText, 'Location not supported');
      }
    });

    function sendMessage(name, email, mobile, messageText, location) {
      const message = [
        'ðŸŸ¢ New Contact Form Submission:',
        'ðŸ‘¤ Name: ' + name,
        'ðŸ“§ Email: ' + email,
        'ðŸ“ž Mobile: ' + mobile,
        'ðŸ’¬ Message: ' + messageText,
        'ðŸ“ Location: ' + location
      ].join('\n');

      const encoded = encodeURIComponent(message);
      const RECIPIENT_NUMBER = '918707235841'; // Replace with your WhatsApp number

      const waUrl = `https://wa.me/${RECIPIENT_NUMBER}?text=${encoded}`;
      const smsUrl = `sms:${RECIPIENT_NUMBER}?body=${encoded}`;

      // Check if it's a mobile device
      const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

      if (isMobile) {
        // Try WhatsApp first, then SMS fallback
        window.location.href = waUrl;
        setTimeout(() => {
          // If WhatsApp is not available, try SMS
          window.location.href = smsUrl;
        }, 3000);
      } else {
        // On desktop, just open WhatsApp Web
        window.open(waUrl, '_blank');
      }

      document.getElementById('contactinfo').reset();
    }
  </script>
</body>
</html>
